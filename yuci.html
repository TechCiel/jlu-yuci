<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
        <title>吉林大学浴池预约</title>
        <style>
        body {
            text-align: center;
            font: 100% 微软雅黑, 宋体, 新宋体;
            color: #333333;
            top: 0px;
        }
        .m1 {
            position: absolute;
            width: 99%;
            top: 0px;
            left: 1px;
        }
        .m2 {
            position: static;
            width: 99%;
            height: 100%;
            top: 0px;
            left: 1px; 
        }
        .style1 {
            font-size: 16px;
            font-weight: bold;
        }
        </style>
        <!--Fuckworks 8 Dreamwaiver 8 target.Created Thu Dec 09 16:45:48 GMT+0800 2010-->
    </head>
    <body bgcolor="#ffffff"">
        <div align="center" class="m1">
            <table width="90%" border="0" align="center" cellpadding="0" cellspacing="1" bgcolor="#CCCCCC">
            <tr>
                <td height="60" colspan="2" align="center" valign="middle" bgcolor="#FFFFFF"><span class="style1">洗浴预约成功</span><br />
                可以收藏或者截图</td>
            </tr>
            <tr>
                <td width="50%" height="30" align="center" valign="middle" bgcolor="#FFFFFF"><div class="f1">姓名</div></td>
                <td align="center" valign="middle" bgcolor="#FFFFFF" id="name"></td>
            </tr>
            <tr>
                <td height="30" align="center" valign="middle" bgcolor="#FFFFFF"><div class="f1">手机号</div></td>
                <td align="center" valign="middle" bgcolor="#FFFFFF" id="phone"></td>
            </tr>
            <tr>
                <td height="30" align="center" valign="middle" bgcolor="#FFFFFF"><div class="f1">学号</div></td>
                <td align="center" valign="middle" bgcolor="#FFFFFF" id="no"></td>
            </tr>
            <tr>
                <td height="30" align="center" valign="middle" bgcolor="#FFFFFF"><div class="f1">性别</div></td>
                <td align="center" valign="middle" bgcolor="#FFFFFF" id="gender"></td>
            </tr>
            
            <tr>
                <td height="30" align="center" valign="middle" bgcolor="#FFFFFF"><div class="f1">浴池</div></td>
                <td align="center" valign="middle" bgcolor="#FFFFFF" id="facility"></td>
            </tr>
            <tr>
                <td height="30" align="center" valign="middle" bgcolor="#FFFFFF"><div class="f1">时间</div></td>
                <td align="center" valign="middle" bgcolor="#FFFFFF" id="time">0-0-0<br>11:00-11:45</td>
            </tr>
            </table>
        </div>
        <script>
            'use strict';
            const params = new URLSearchParams(window.location.search);
            const dt = new Date();
            document.getElementById('name').innerHTML=params.get('name');
            document.getElementById('phone').innerHTML=params.get('phone');
            document.getElementById('no').innerHTML=params.get('no');
            document.getElementById('gender').innerHTML=params.get('gender');
            document.getElementById('facility').innerHTML=params.get('facility');
            let tableDate = dt.getFullYear()+'-'+(dt.getMonth()+1)+'-'+dt.getDate();
            let tableTime = '当前不在洗浴时段！';
            let timeRanges = ['20:15-21:00',
                '19:30-20:15',
                '18:45-19:30',
                '18:00-18:45',
                '17:00-17:45',
                '16:15-17:00',
                '15:30-16:15',
                '14:45-15:30',
                '14:00-14:45',
                '13:15-14:00',
                '12:30-13:15',
                '11:45-12:30',
                '11:00-11:45'
            ];
            for(let range of timeRanges) {
                let rangeTime = /^(\d\d)\:(\d\d)\-(\d\d)\:(\d\d)$/.exec(range);
                console.log(rangeTime[1]*60+rangeTime[2]*1);
                if(dt.getHours()*60+dt.getMinutes()>=rangeTime[1]*60+rangeTime[2]*1&&
                    dt.getHours()*60+dt.getMinutes()<=rangeTime[3]*60+rangeTime[4]*1) {
                    tableTime = range;
                    break;
                }
            }
            document.getElementById('time').innerHTML=tableDate+'<br>'+tableTime;
            if(params.has('time')) document.getElementById('time').innerHTML=params.get('time');
        </script>
    </body>
</html>
